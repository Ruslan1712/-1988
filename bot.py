from telegram import Update, InlineKeyboardButton, InlineKeyboardMarkup, ReplyKeyboardMarkup, KeyboardButton
from telegram.ext import ApplicationBuilder, CommandHandler, CallbackQueryHandler, MessageHandler, ContextTypes, filters

import os

TOKEN = os.getenv("BOT_TOKEN")

# –ü–æ–¥—Ä–æ–±–Ω—ã–µ —Ç–µ–∫—Å—Ç—ã –ø–æ –∫–Ω–æ–ø–∫–∞–º
services = {
    "–ó–∞–º–µ–Ω–∞ –ª–∏–Ω–∑": (
        "üîß *–ó–∞–º–µ–Ω–∞ –ª–∏–Ω–∑ –≤ —Ñ–∞—Ä–∞—Ö:*",
        "\n\n".join([
            "üîπ Lixiang L-—Å–µ—Ä–∏–∏ ‚Äî 100 000 ‚ÇΩ",
            "üîπ –¢–≤—ë—Ä–¥—ã–π –≥–µ—Ä–º–µ—Ç–∏–∫ —Å –∞–¥–∞–ø—Ç–∏–≤–æ–º (AFS, AFL) –∏–ª–∏ —Å –¥–æ–ø. —Ä–∞–±–æ—Ç–∞–º–∏ ‚Äî 19 500 ‚ÇΩ",
            "üîπ –¢–≤—ë—Ä–¥—ã–π –≥–µ—Ä–º–µ—Ç–∏–∫ ‚Äî 17 500 ‚ÇΩ",
            "üîπ –ú—è–≥–∫–∏–π –≥–µ—Ä–º–µ—Ç–∏–∫ ‚Äî 14 500 ‚ÇΩ",
            "üîπ –ú—è–≥–∫–∏–π –≥–µ—Ä–º–µ—Ç–∏–∫ —Å –∞–¥–∞–ø—Ç–∏–≤–æ–º (AFS, AFL) –∏–ª–∏ —Å –¥–æ–ø. —Ä–∞–±–æ—Ç–∞–º–∏ ‚Äî 16 500 ‚ÇΩ",
        ])
    ),
    "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ª–∏–Ω–∑": (
        "üîß *–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ª–∏–Ω–∑ –≤ —Ñ–∞—Ä—ã:*",
        "\n\n".join([
            "üîπ –ö–≤–∞–¥—Ä–æ–±–∏–ª–µ–¥ (–º—è–≥–∫–∏–π –≥–µ—Ä–º–µ—Ç–∏–∫, —à–ø–∏–ª—å–∫–∞) ‚Äî 34 000 ‚ÇΩ",
            "üîπ –ö–≤–∞–¥—Ä–æ–±–∏–ª–µ–¥ (—Ç–≤—ë—Ä–¥—ã–π –≥–µ—Ä–º–µ—Ç–∏–∫, –≥–∞–π–∫–∞) ‚Äî 32 000 ‚ÇΩ",
            "üîπ –ö–≤–∞–¥—Ä–æ–±–∏–ª–µ–¥ (—Ç–≤—ë—Ä–¥—ã–π –≥–µ—Ä–º–µ—Ç–∏–∫, —à–ø–∏–ª—å–∫–∞) ‚Äî 42 000 ‚ÇΩ",
            "üîπ –ö–≤–∞–¥—Ä–æ–±–∏–ª–µ–¥ (–º—è–≥–∫–∏–π –≥–µ—Ä–º–µ—Ç–∏–∫, –≥–∞–π–∫–∞) ‚Äî 28 000 ‚ÇΩ",
            "üîπ –¢–≤—ë—Ä–¥—ã–π –≥–µ—Ä–º–µ—Ç–∏–∫, –≥–∞–π–∫–∞ ‚Äî 20 500 ‚ÇΩ",
            "üîπ –¢–≤—ë—Ä–¥—ã–π –≥–µ—Ä–º–µ—Ç–∏–∫, —à–ø–∏–ª—å–∫–∞ ‚Äî 22 500 ‚ÇΩ",
            "üîπ –¢–≤—ë—Ä–¥—ã–π –≥–µ—Ä–º–µ—Ç–∏–∫, —à–ø–∏–ª—å–∫–∞ + –¥–æ–ø. —Ä–∞–±–æ—Ç—ã ‚Äî 26 500 ‚ÇΩ",
            "üîπ –ú—è–≥–∫–∏–π –≥–µ—Ä–º–µ—Ç–∏–∫, –≥–∞–π–∫–∞ ‚Äî 15 500 ‚ÇΩ",
            "üîπ –ú—è–≥–∫–∏–π –≥–µ—Ä–º–µ—Ç–∏–∫, —à–ø–∏–ª—å–∫–∞ ‚Äî 17 500 ‚ÇΩ",
        ])
    ),
    "–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–ø–æ—Ç–µ–≤–∞–Ω–∏—è": (
        "üí® *–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–ø–æ—Ç–µ–≤–∞–Ω–∏—è:*",
        "\n\n".join([
            "üîπ –î–µ—Ñ–µ–∫—Ç–æ–≤–∫–∞ ‚Äî 2 000 ‚ÇΩ",
            "üîπ –û—á–∏—Å—Ç–∫–∞ —Å—Ç–µ–∫–ª–∞ (–≤–Ω—É—Ç—Ä–∏) ‚Äî 2 000 ‚ÇΩ",
            "üîπ –†–µ–º–æ–Ω—Ç 1-–≥–æ –∫—Ä–µ–ø–ª–µ–Ω–∏—è ‚Äî 3 000 ‚ÇΩ",
            "üîπ –†–µ–º–æ–Ω—Ç —Ç—Ä–µ—â–∏–Ω—ã –¥–æ 2 —Å–º ‚Äî 2 500 ‚ÇΩ",
            "üîπ –†–µ–º–æ–Ω—Ç —Ç—Ä–µ—â–∏–Ω—ã 2‚Äì4 —Å–º ‚Äî 5 000 ‚ÇΩ",
            "üîπ –®–æ–≤ –º—è–≥–∫–∏–π –≥–µ—Ä–º–µ—Ç–∏–∫ ‚Äî 5 000 ‚ÇΩ",
            "üîπ –®–æ–≤ –º—è–≥–∫–∏–π –≥–µ—Ä–º–µ—Ç–∏–∫ (–ø—Ä–µ–º–∏—É–º, W222 –¥–æ—Ä–µ—Å—Ç.) ‚Äî 14 000 ‚ÇΩ",
            "üîπ –®–æ–≤ —Ç–≤—ë—Ä–¥—ã–π –≥–µ—Ä–º–µ—Ç–∏–∫ (–ø—Ä–µ–º–∏—É–º, W222 —Ä–µ—Å—Ç.) ‚Äî 18 000 ‚ÇΩ",
            "üîπ –®–æ–≤ —Ç–≤—ë—Ä–¥—ã–π –≥–µ—Ä–º–µ—Ç–∏–∫ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Å—Ç–µ–∫–ª–∞ ‚Äî 12 000 ‚ÇΩ",
        ])
    ),
    "–ü–æ–ª–∏—Ä–æ–≤–∫–∞ –∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞—Ä": (
        "‚ú® *–ü–æ–ª–∏—Ä–æ–≤–∫–∞ –∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ:*",
        "–ü–æ–ª–∏—Ä–æ–≤–∫–∞ –æ—Ç –º—É—Ç–Ω–æ—Å—Ç–∏ + –∑–∞—â–∏—Ç–∞ –ø–ª–µ–Ω–∫–æ–π ‚Äî –æ—Ç 1 500 ‚ÇΩ –∑–∞ —Ñ–∞—Ä—É."
    ),
    "–ó–∞–º–µ–Ω–∞ —Å—Ç–µ–∫–æ–ª": (
        "üîÅ *–ó–∞–º–µ–Ω–∞ —Å—Ç–µ–∫–æ–ª —Ñ–∞—Ä:*",
        "\n\n".join([
            "üîπ –ú—è–≥–∫–∏–π –≥–µ—Ä–º–µ—Ç–∏–∫ + –Ω–æ–≤—ã–π –≥–µ—Ä–º–µ—Ç–∏–∫ ‚Äî 4 000 ‚ÇΩ",
            "üîπ –¢–≤—ë—Ä–¥—ã–π –≥–µ—Ä–º–µ—Ç–∏–∫ + –Ω–æ–≤—ã–π –≥–µ—Ä–º–µ—Ç–∏–∫ ‚Äî 8 000 ‚ÇΩ",
            "üîπ –¢–≤—ë—Ä–¥—ã–π –≥–µ—Ä–º–µ—Ç–∏–∫ (–ø—Ä–µ–º–∏—É–º) ‚Äî 12 000 ‚ÇΩ",
        ])
    )
}

async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    keyboard = [
        [InlineKeyboardButton(text, callback_data=text)] for text in services
    ] + [
        [InlineKeyboardButton("üì© –û—Å—Ç–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É", callback_data="contact")],
        [InlineKeyboardButton("üì± WhatsApp", url="https://wa.me/79801666725")],
        [InlineKeyboardButton("üìç –ê–¥—Ä–µ—Å –∏ –≥—Ä–∞—Ñ–∏–∫", callback_data="location")]
    ]
    reply_markup = InlineKeyboardMarkup(keyboard)

    greeting = (
        "–î–æ–±—Ä—ã–π –¥–µ–Ω—å! –í–∞—Å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ—Ç *–°—Ç—É–¥–∏—è –∞–≤—Ç–æ —Å–≤–µ—Ç–∞*.\n\n"
        "–ú—ã –∑–∞–Ω–∏–º–∞–µ–º—Å—è —Ä–µ—Ç—Ä–æ—Ñ–∏—Ç–æ–º —Ñ–∞—Ä, —Ä–µ–º–æ–Ω—Ç–æ–º –∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ–º –∑–∞–ø–æ—Ç–µ–≤–∞–Ω–∏—è —Ñ–∞—Ä.\n"
        "üîß –û–ø—ã—Ç —Ä–∞–±–æ—Ç—ã –±–æ–ª–µ–µ 5 –ª–µ—Ç.\n\n"
        "–í—ã–±–µ—Ä–∏—Ç–µ –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â—É—é —É—Å–ª—É–≥—É:"
    )

    if update.message:
        await update.message.reply_text(greeting, reply_markup=reply_markup, parse_mode="Markdown")
    elif update.callback_query:
        await update.callback_query.message.edit_text(greeting, reply_markup=reply_markup, parse_mode="Markdown")


def main():
    app = ApplicationBuilder().token(TOKEN).build()
    app.add_handler(CommandHandler("start", start))
    print("–ë–æ—Ç –∑–∞–ø—É—â–µ–Ω ‚úÖ")
    app.run_polling()


if __name__ == "__main__":
    main()
